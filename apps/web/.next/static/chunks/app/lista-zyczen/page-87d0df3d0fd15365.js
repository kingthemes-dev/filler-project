(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4698],{2167:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(92068).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},10614:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(92068).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},12494:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(92068).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},26862:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(92068).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},39109:(e,t,s)=>{"use strict";s.d(t,{N:()=>y});var r=s(54568),a=s(7620),i=s(95971),l=s(23847),n=s(85176),c=s(42015),o=s(83449),d=s(39070);class h extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,o.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:t,anchorX:s,root:i}){let l=(0,a.useId)(),n=(0,a.useRef)(null),c=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,a.useContext)(d.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:r,top:a,left:d,right:h}=c.current;if(t||!n.current||!e||!r)return;let p="left"===s?`left: ${d}`:`right: ${h}`;n.current.dataset.motionPopId=l;let u=document.createElement("style");o&&(u.nonce=o);let m=i??document.head;return m.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${p}px !important;
            top: ${a}px !important;
          }
        `),()=>{m.contains(u)&&m.removeChild(u)}},[t]),(0,r.jsx)(h,{isPresent:t,childRef:n,sizeRef:c,children:a.cloneElement(e,{ref:n})})}let u=({children:e,initial:t,isPresent:s,onExitComplete:i,custom:n,presenceAffectsLayout:o,mode:d,anchorX:h,root:u})=>{let x=(0,l.M)(m),g=(0,a.useId)(),f=!0,y=(0,a.useMemo)(()=>(f=!1,{id:g,initial:t,isPresent:s,custom:n,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;i&&i()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[s,x,i]);return o&&f&&(y={...y}),(0,a.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[s]),a.useEffect(()=>{s||x.size||!i||i()},[s]),"popLayout"===d&&(e=(0,r.jsx)(p,{isPresent:s,anchorX:h,root:u,children:e})),(0,r.jsx)(c.t.Provider,{value:y,children:e})};function m(){return new Map}var x=s(26472);let g=e=>e.key||"";function f(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:t,initial:s=!0,onExitComplete:c,presenceAffectsLayout:o=!0,mode:d="sync",propagate:h=!1,anchorX:p="left",root:m})=>{let[y,j]=(0,x.xQ)(h),v=(0,a.useMemo)(()=>f(e),[e]),N=h&&!y?[]:v.map(g),k=(0,a.useRef)(!0),w=(0,a.useRef)(v),_=(0,l.M)(()=>new Map),[b,z]=(0,a.useState)(v),[A,$]=(0,a.useState)(v);(0,n.E)(()=>{k.current=!1,w.current=v;for(let e=0;e<A.length;e++){let t=g(A[e]);N.includes(t)?_.delete(t):!0!==_.get(t)&&_.set(t,!1)}},[A,N.length,N.join("-")]);let E=[];if(v!==b){let e=[...v];for(let t=0;t<A.length;t++){let s=A[t],r=g(s);N.includes(r)||(e.splice(t,0,s),E.push(s))}return"wait"===d&&E.length&&(e=E),$(f(e)),z(v),null}let{forceRender:C}=(0,a.useContext)(i.L);return(0,r.jsx)(r.Fragment,{children:A.map(e=>{let a=g(e),i=(!h||!!y)&&(v===A||N.includes(a));return(0,r.jsx)(u,{isPresent:i,initial:(!k.current||!!s)&&void 0,custom:t,presenceAffectsLayout:o,mode:d,root:m,onExitComplete:i?void 0:()=>{if(!_.has(a))return;_.set(a,!0);let e=!0;_.forEach(t=>{t||(e=!1)}),e&&(C?.(),$(w.current),h&&j?.(),c&&c())},anchorX:p,children:e},a)})})}},50508:(e,t,s)=>{"use strict";s.d(t,{n:()=>n});var r=s(71620),a=s(50848);let i={getItem:e=>{try{return localStorage.getItem(e)}catch{return null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch{}},removeItem:e=>{try{localStorage.removeItem(e)}catch{}}},l=(0,r.v)()((0,a.Zr)((e,t)=>({items:[],isLoading:!1,error:null,addItem:s=>{let{items:r}=t();if(r.find(e=>e.id===s.id))return;let a={id:s.id,name:s.name,price:s.price,regular_price:s.regular_price,sale_price:s.sale_price||"",images:s.images||[],slug:s.slug,stock_status:s.stock_status,addedAt:Date.now()};e(e=>({items:[...e.items,a],error:null})),t().syncWithServer()},removeItem:s=>{e(e=>({items:e.items.filter(e=>e.id!==s),error:null})),t().syncWithServer()},toggleItem:e=>{let{items:s,addItem:r,removeItem:a}=t();s.find(t=>t.id===e.id)?a(e.id):r(e)},clearWishlist:()=>{e({items:[],error:null}),t().syncWithServer()},isInWishlist:e=>{let{items:s}=t();return s.some(t=>t.id===e)},getItemCount:()=>{let{items:e}=t();return e.length},syncWithServer:async()=>{let{items:s}=t();try{if(e({isLoading:!0,error:null}),!(await fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:s.map(e=>({product_id:e.id,added_at:e.addedAt}))})})).ok)throw Error("Nie udało się zsynchronizować listy życzeń");e({isLoading:!1})}catch(t){console.error("Wishlist sync error:",t),e({isLoading:!1,error:t.message||"Błąd synchronizacji listy życzeń"})}},loadFromServer:async()=>{try{e({isLoading:!0,error:null});let t=await fetch("/api/favorites");if(!t.ok)throw Error("Nie udało się pobrać listy życzeń");let s=await t.json();s.success&&s.favorites?e({items:s.favorites.map(e=>({id:e.product_id,name:e.product_name||`Produkt ${e.product_id}`,price:e.product_price||"0",regular_price:e.product_regular_price||"0",sale_price:e.product_sale_price||"",images:e.product_images||[],slug:e.product_slug||"",stock_status:e.product_stock_status||"instock",addedAt:new Date(e.added_at).getTime()||Date.now()})),isLoading:!1}):e({items:[],isLoading:!1})}catch(t){console.error("Wishlist load error:",t),e({isLoading:!1,error:t.message||"Błąd ładowania listy życzeń"})}}}),{name:"wishlist-storage",storage:(0,a.KU)(()=>i),partialize:e=>({items:e.items})}));function n(){return l()}},64751:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(92068).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},65723:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(54568),a=s(7620),i=s(86660),l=s(91762),n=s(64751),c=s(2167),o=s(38391),d=s(70415),h=s(19664),p=s.n(h),u=s(32536),m=s(50508),x=s(43199),g=s(95400),f=s(88186),y=s(29977),j=s(90011),v=s(16085);function N(){let{items:e,isLoading:t,error:s,removeItem:h,clearWishlist:N,loadFromServer:k}=(0,m.n)(),{addItem:w,openCart:_}=(0,x.x)(),[b,z]=(0,a.useState)(!1),[A,$]=(0,a.useState)(null);(0,a.useEffect)(()=>{k()},[k]);let E=async e=>{try{await w({id:e.id,name:e.name,price:parseFloat(e.price),sale_price:e.sale_price?parseFloat(e.sale_price):void 0,regular_price:parseFloat(e.regular_price),image:e.images[0]?.src||"/images/placeholder-product.jpg",permalink:e.permalink}),_()}catch(e){console.error("Error adding to cart:",e)}};return t?(0,r.jsx)("div",{className:"min-h-screen bg-white py-8 pb-16",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Ładowanie listy życzeń..."})]})})})}):s?(0,r.jsx)("div",{className:"min-h-screen bg-white py-8 pb-16",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"text-red-500 mb-4",children:(0,r.jsx)(l.A,{className:"w-16 h-16 mx-auto"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Błąd ładowania"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:s}),(0,r.jsx)(g.$,{onClick:k,variant:"outline",children:"Spr\xf3buj ponownie"})]})})}):0===e.length?(0,r.jsx)("div",{className:"min-h-screen bg-white py-8 pb-16",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)(l.A,{className:"w-16 h-16 mx-auto"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Lista życzeń jest pusta"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Dodaj produkty do listy życzeń, klikając ikonę serca na kartach produkt\xf3w"}),(0,r.jsx)(p(),{href:"/sklep",children:(0,r.jsx)(g.$,{children:"Przejdź do sklepu"})})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-white py-8 pb-16",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(p(),{href:"/sklep",children:(0,r.jsxs)(g.$,{variant:"outline",size:"sm",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Powr\xf3t do sklepu"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Lista życzeń"}),(0,r.jsxs)("p",{className:"text-gray-600",children:[e.length," ",1===e.length?"produkt":"produkt\xf3w"]})]})]}),e.length>0&&(0,r.jsxs)(g.$,{variant:"outline",onClick:N,className:"text-red-600 hover:text-red-700 hover:border-red-300",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Wyczyść listę"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,r.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,r.jsxs)(f.Zp,{className:"group hover:shadow-lg transition-all duration-300 border-gray-200 rounded-xl overflow-hidden",children:[(0,r.jsx)(f.aR,{className:"p-0",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p(),{href:`/produkt/${e.slug}`,children:(0,r.jsx)("div",{className:"aspect-square relative overflow-hidden",children:(0,r.jsx)(u.default,{src:e.images[0]?.src||"/images/placeholder-product.jpg",alt:e.name,width:300,height:300,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})})}),(0,r.jsx)("button",{onClick:()=>h(e.id),className:"absolute top-2 right-2 w-8 h-8 bg-white/80 hover:bg-white hover:shadow-md rounded-full flex items-center justify-center transition-all duration-150",children:(0,r.jsx)(l.A,{className:"w-4 h-4 fill-current text-pink-500"})})]})}),(0,r.jsxs)(f.Wu,{className:"p-4",children:[(0,r.jsx)(p(),{href:`/produkt/${e.slug}`,children:(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 group-hover:text-gray-700 transition-colors",children:e.name})}),(0,r.jsx)("div",{className:"flex items-center space-x-2 mb-3",children:e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.regular_price)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:(0,j.$g)(parseFloat(e.sale_price))}),(0,r.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,j.$g)(parseFloat(e.regular_price))}),(0,r.jsx)(y.E,{variant:"destructive",className:"text-xs",children:"Promocja"})]}):(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:(0,j.$g)(parseFloat(e.price))})}),(0,r.jsx)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${"instock"===e.stock_status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:"instock"===e.stock_status?"Dostępny":"Niedostępny"})})]}),(0,r.jsx)(f.wL,{className:"p-4 pt-0",children:(0,r.jsxs)("div",{className:"flex space-x-2 w-full",children:[(0,r.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>{$({id:e.id,name:e.name,slug:e.slug,price:e.price,regular_price:e.regular_price,sale_price:e.sale_price,images:e.images,stock_status:e.stock_status}),z(!0)},className:"flex-1",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Podgląd"]}),(0,r.jsxs)(g.$,{size:"sm",onClick:()=>E(e),disabled:"instock"!==e.stock_status,className:"flex-1",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Do koszyka"]})]})})]})},e.id))}),A&&(0,r.jsx)(v.A,{isOpen:b,onClose:()=>{z(!1),$(null)},product:A})]})})}},90722:(e,t,s)=>{Promise.resolve().then(s.bind(s,65723))}},e=>{e.O(0,[9391,9775,6102,6489,4321,4294,587,18,7358],()=>e(e.s=90722)),_N_E=e.O()}]);