"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6489],{56489:(e,r,t)=>{t.d(r,{Ay:()=>o,Of:()=>a});class a{constructor(){this.baseUrl="/api/woocommerce"}async getPaymentGateways(){try{let e=await fetch("/api/woocommerce?endpoint=payment_gateways",{headers:{Accept:"application/json"}});if(!e.ok){let r=await e.json();throw Error(r.error||"Nie udało się pobrać metod płatności")}let r=((await e.json()).gateways||[]).map(e=>({id:e.id,title:e.title||e.method_title||e.id,description:e.description||"",enabled:!0===e.enabled||"yes"===e.enabled}));return{success:!0,gateways:r}}catch(e){return console.error("Error fetching payment gateways:",e),{success:!1,error:"Nie udało się pobrać metod płatności"}}}async getHomepageData(){try{let e=await fetch(`${this.baseUrl}?endpoint=homepage&_fields=id,name,slug,price,regular_price,sale_price,on_sale,featured,images,stock_status,average_rating,rating_count`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching homepage data:",e),e}}async getShopData(e=1,r=12,t){try{let a=new URLSearchParams({endpoint:"shop",page:e.toString(),per_page:r.toString(),_fields:"id,name,slug,price,regular_price,sale_price,on_sale,featured,images,stock_status,average_rating,rating_count,categories,attributes"});t?.category&&a.append("category",t.category),t?.search&&a.append("search",t.search),t?.orderby&&a.append("orderby",t.orderby),t?.order&&a.append("order",t.order),t?.on_sale&&a.append("on_sale",String(t.on_sale)),t?.featured&&a.append("featured",String(t.featured)),t?.min_price!==void 0&&a.append("min_price",String(t.min_price)),t?.max_price!==void 0&&a.append("max_price",String(t.max_price)),t?.capacities&&t.capacities.length>0&&a.append("capacities",t.capacities.join(",")),t?.brands&&t.brands.length>0&&a.append("brands",t.brands.join(","));let o=await fetch(`/api/woocommerce?${a.toString()}`);if(!o.ok)throw Error(`HTTP error! status: ${o.status}`);let s=await o.json();return{products:s.products||[],total:parseInt(s.total)||0,totalPages:Math.ceil((parseInt(s.total)||0)/r),categories:s.categories||[],attributes:{capacities:s.attributes?.capacities||[],brands:s.attributes?.brands||[]}}}catch(e){throw console.error("Error fetching shop data:",e),e}}async getProductData(e){try{let r=await fetch(`${this.baseUrl}?endpoint=product/${e}`);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(e){throw console.error("Error fetching product data:",e),e}}async getProductById(e){try{let r=await fetch(`${this.baseUrl}?endpoint=products/${e}&cache=off`);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(e){throw console.error("Error fetching product by ID:",e),e}}async getProductBySlug(e){try{let r=await fetch(`${this.baseUrl}?endpoint=products&slug=${e}&cache=off`);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);let t=await r.json();return Array.isArray(t)&&t.length>0?t[0]:null}catch(e){throw console.error("Error fetching product by slug:",e),e}}async getCategories(){try{let e=await fetch(`${this.baseUrl}?endpoint=products/categories`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let r=await e.json();return{data:Array.isArray(r)?r:[r],total:Array.isArray(r)?r.length:1,totalPages:1,currentPage:1,perPage:100}}catch(e){return console.error("Error fetching categories:",e),this.getMockCategories()}}getMockCategories(){return{data:[{id:1,name:"Kremy",slug:"kremy",count:15},{id:2,name:"Serum",slug:"serum",count:8},{id:3,name:"Tonery",slug:"tonery",count:12},{id:4,name:"Maseczki",slug:"maseczki",count:6},{id:5,name:"Peelingi",slug:"peelingi",count:4}],total:5,totalPages:1,currentPage:1,perPage:100}}getMockProducts(e={}){let r=[{id:1,name:"Krem nawilżający z kwasem hialuronowym",slug:"krem-nawilzajacy-kwas-hialuronowy",price:"89.99",regular_price:"119.99",sale_price:"89.99",on_sale:!0,featured:!0,images:[{id:0,date_created:"",date_created_gmt:"",date_modified:"",date_modified_gmt:"",src:"/images/placeholder-product.jpg",name:"Placeholder",alt:"Krem nawilżający"}],categories:[{id:1,name:"Kremy",slug:"kremy"}],attributes:[],stock_status:"instock",short_description:"Intensywnie nawilżający krem z kwasem hialuronowym",description:"Profesjonalny krem nawilżający z kwasem hialuronowym dla sk\xf3ry twarzy.",sku:"KREM-001"},{id:2,name:"Serum witaminowe C + E",slug:"serum-witaminowe-c-e",price:"149.99",regular_price:"149.99",sale_price:"",on_sale:!1,featured:!0,images:[{id:0,date_created:"",date_created_gmt:"",date_modified:"",date_modified_gmt:"",src:"/images/placeholder-product.jpg",name:"Placeholder",alt:"Serum witaminowe"}],categories:[{id:2,name:"Serum",slug:"serum"}],attributes:[],stock_status:"instock",short_description:"Silne serum z witaminami C i E",description:"Mocne serum antyoksydacyjne z witaminami C i E.",sku:"SERUM-001"},{id:3,name:"Toner oczyszczający z kwasem salicylowym",slug:"toner-oczyszczajacy-kwas-salicylowy",price:"69.99",regular_price:"89.99",sale_price:"69.99",on_sale:!0,featured:!1,images:[{id:0,date_created:"",date_created_gmt:"",date_modified:"",date_modified_gmt:"",src:"/images/placeholder-product.jpg",name:"Placeholder",alt:"Toner oczyszczający"}],categories:[{id:3,name:"Tonery",slug:"tonery"}],attributes:[],stock_status:"instock",short_description:"Delikatny toner z kwasem salicylowym",description:"Oczyszczający toner z kwasem salicylowym dla sk\xf3ry problematycznej.",sku:"TONER-001"}];return{data:r,total:r.length,totalPages:1,currentPage:1,perPage:e.per_page||10}}async getProducts(e={}){try{let r=new URLSearchParams;e.per_page&&r.append("per_page",e.per_page.toString()),e.page&&r.append("page",e.page.toString()),e.search&&r.append("search",e.search),e.category&&r.append("category",e.category),e.orderby&&r.append("orderby",e.orderby),e.order&&r.append("order",e.order),e.featured&&r.append("featured",e.featured.toString()),e.on_sale&&r.append("on_sale",e.on_sale.toString()),e.stock_status&&r.append("stock_status",e.stock_status),e.min_price&&r.append("min_price",e.min_price),e.max_price&&r.append("max_price",e.max_price);let t=e.attribute,a=e.attribute_term;if(Array.isArray(t)&&Array.isArray(a))for(let e=0;e<Math.min(t.length,a.length);e+=1)r.append("attribute",String(t[e])),r.append("attribute_term",String(a[e]));else t&&r.append("attribute",String(t)),a&&r.append("attribute_term",String(a));(e.search||e.category||e.min_price||e.max_price||t||a)&&(r.append("cache","off"),r.append("_",String(Date.now())));let o=await fetch(`${this.baseUrl}?endpoint=products&${r}`);if(!o.ok)throw Error(`HTTP error! status: ${o.status}`);let s=await o.json();return{data:Array.isArray(s)?s:[s],total:Array.isArray(s)?s.length:1,totalPages:1,currentPage:1,perPage:e.per_page||10}}catch(r){return console.error("Error fetching products:",r),this.getMockProducts(e)}}async getProduct(e){try{let r=await fetch(`${this.baseUrl}?endpoint=products/${e}`);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(e){return console.error("Error fetching product:",e),{id:0,name:"Produkt niedostępny",slug:"produkt-niedostepny",permalink:"",date_created:"",date_created_gmt:"",date_modified:"",date_modified_gmt:"",type:"simple",status:"private",featured:!1,catalog_visibility:"visible",description:"",short_description:"",sku:"",price:"0",regular_price:"0",sale_price:"",date_on_sale_from:null,date_on_sale_from_gmt:null,date_on_sale_to:null,date_on_sale_to_gmt:null,price_html:"",on_sale:!1,purchasable:!1,total_sales:0,virtual:!1,downloadable:!1,downloads:[],download_limit:-1,download_expiry:-1,tax_status:"taxable",tax_class:"",manage_stock:!1,stock_quantity:0,stock_status:"outofstock",backorders:"no",backorders_allowed:!1,backordered:!1,sold_individually:!1,weight:"",dimensions:{length:"",width:"",height:""},shipping_required:!1,shipping_taxable:!1,shipping_class:"",shipping_class_id:0,categories:[],reviews_allowed:!1,average_rating:"0",rating_count:0,related_ids:[],upsell_ids:[],cross_sell_ids:[],parent_id:0,purchase_note:"",tags:[],images:[],attributes:[],default_attributes:[],variations:[],grouped_products:[],menu_order:0,meta_data:[],_links:{self:[],collection:[]}}}}async getNonce(){try{let e=await fetch("https://qvwltjhdjw.cfolks.pl/wp-json/king-cart/v1/nonce");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let r=await e.text(),t=r,a=r.match(/\{.*\}/);return a&&(t=a[0]),JSON.parse(t)}catch(e){throw console.error("Error getting nonce:",e),e}}async addToCart(e,r=1,t){try{if(!(await this.getNonce()).success)throw Error("Failed to get nonce");let a=await fetch("/api/cart-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:r,variation:t})});if(!a.ok)return{success:!1,message:`HTTP ${a.status}`};return await a.json()}catch(e){return{success:!1,message:e instanceof Error?e.message:"unknown error"}}}async removeFromCart(e){try{let r=await this.getNonce();if(!r.success)throw Error("Failed to get nonce");let t=await fetch("https://qvwltjhdjw.cfolks.pl/wp-json/king-cart/v1/remove-item",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},body:JSON.stringify({key:e})});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){throw console.error("Error removing from cart:",e),e}}async updateCartItem(e,r){try{let t=await this.getNonce();if(!t.success)throw Error("Failed to get nonce");let a=await fetch("https://qvwltjhdjw.cfolks.pl/wp-json/king-cart/v1/update-item",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},body:JSON.stringify({key:e,quantity:r})});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(e){throw console.error("Error updating cart item:",e),e}}async getCart(){try{let e=await fetch("https://qvwltjhdjw.cfolks.pl/wp-json/king-cart/v1/cart");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error getting cart:",e),e}}async getProductReviews(e){try{let r=await fetch(`${this.baseUrl}?endpoint=reviews&product_id=${e}&cache=off`);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(e){throw console.error("Error fetching product reviews:",e),e}}async createProductReview(e){try{let r=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||`HTTP error! status: ${r.status}`)}let t=await r.json();return{success:!0,review:{id:t.id,review:t.review,rating:t.rating,reviewer:t.reviewer,date_created:t.date_created}}}catch(e){return console.error("Error creating product review:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create review"}}}async loginUser(e,r){try{let r=await fetch("https://qvwltjhdjw.cfolks.pl/wp-json/wc/v3/customers",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("ck_deb61eadd7301ebfc5f8074ce7c53c6668eb725d:cs_0de18ed0e013f96aebfb51c77f506bb94e416cb8")}});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);let t=(await r.json()).find(r=>r.email===e);if(!t)return{success:!1,error:"Użytkownik nie znaleziony. Sprawdź email lub zarejestruj się."};return{success:!0,user:{id:t.id,email:t.email,name:`${t.first_name||""} ${t.last_name||""}`.trim()||t.email,token:"mock-token"}}}catch(e){return console.error("Error logging in user:",e),{success:!1,error:e instanceof Error?e.message:"Błąd logowania. Sprawdź email i hasło."}}}async registerUser(e){try{let r={email:e.email,password:e.password,first_name:e.first_name||"",last_name:e.last_name||"",billing:{first_name:e.first_name||"",last_name:e.last_name||""},shipping:{first_name:e.first_name||"",last_name:e.last_name||""}},t=await fetch("https://qvwltjhdjw.cfolks.pl/wp-json/wc/v3/customers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("ck_deb61eadd7301ebfc5f8074ce7c53c6668eb725d:cs_0de18ed0e013f96aebfb51c77f506bb94e416cb8")},body:JSON.stringify(r)});if(!t.ok){let e=await t.text();try{let r=JSON.parse(e);if("registration-error-email-exists"===r.code)throw Error(r.message||"Email już istnieje")}catch(e){}throw Error(`HTTP error! status: ${t.status}`)}let a=await t.json();return{success:!0,message:"Rejestracja udana!",user:{id:a.id,username:a.username,email:a.email}}}catch(e){throw console.error("Error registering user:",e),e}}isProductOnSale(e){return e.on_sale||!1}getProductDiscount(e){if(!this.isProductOnSale(e))return 0;let r=parseFloat(e.regular_price||"0"),t=parseFloat(e.sale_price||e.price||"0");return 0===r?0:Math.round((r-t)/r*100)}getProductImageUrl(e,r="medium"){if(!e.images||0===e.images.length)return"/images/placeholder-product.jpg";let t=e.images[0],a="";if("string"==typeof t)a=t;else{if("object"!=typeof t||!t.src)return"/images/placeholder-product.jpg";a=t.src}return a.includes("-300x300.")?a=a.replace("-300x300.","-600x600."):a.includes("-150x150.")?a=a.replace("-150x150.","-600x600."):a.includes("-100x100.")&&(a=a.replace("-100x100.","-600x600.")),a}formatPrice(e){let r="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN",minimumFractionDigits:2}).format(r)}async getShippingMethods(e="PL",r="",t="",a=""){try{let o=new URLSearchParams({endpoint:"shipping_methods",country:e,state:r,city:t,postcode:a,_fields:"id,method_id,title,cost,settings,zone_id,zone_name"}),s=await fetch(`/api/woocommerce?${o.toString()}`);if(!s.ok){let e=await s.json();throw Error(e.error||"Nie udało się pobrać metod wysyłki")}return((await s.json()).shipping_methods||[]).map(e=>{var r;let t=0,a=0;if("flexible_shipping_single"===e.method_id){let r=e.settings;if(r&&r.method_free_shipping&&r.method_free_shipping.value&&(a=parseFloat(r.method_free_shipping.value)),r&&r.method_rules&&r.method_rules.value&&r.method_rules.value.length>0){let e=r.method_rules.value;e[0]&&e[0].cost_per_order&&(t=parseFloat(e[0].cost_per_order))}}else if("flat_rate"===e.method_id){let r=e.settings;r&&r.cost&&r.cost.value&&(t=parseFloat(r.cost.value))}return{id:e.id,method_id:e.method_id,method_title:e.settings?.method_title?.value||e.method_title||e.title||"Dostawa",method_description:(r=e.settings?.method_description?.value||"")?r.replace(/<[^>]*>/g,"").replace(/&rarr;/g,"→").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim():"",cost:t,free_shipping_threshold:a,zone_id:e.zone_id||0,zone_name:e.zone_name||"",settings:e.settings}})}catch(e){return console.error("Error fetching shipping methods:",e),{success:!0,methods:[{id:"1",method_id:"free_shipping",method_title:"Darmowa wysyłka",method_description:"Darmowa dostawa od 200 zł",cost:0,free_shipping_threshold:2e4,zone_id:"1",zone_name:"Polska"},{id:"2",method_id:"flat_rate",method_title:"Kurier DPD",method_description:"Dostawa w 1-2 dni robocze",cost:1500,free_shipping_threshold:0,zone_id:"1",zone_name:"Polska"},{id:"3",method_id:"local_pickup",method_title:"Odbi\xf3r osobisty",method_description:"Gdańsk, ul. Partyzant\xf3w 8/101",cost:0,free_shipping_threshold:0,zone_id:"1",zone_name:"Polska"}]}}}async getProductVariations(e){try{let r=await fetch(`/api/woocommerce?endpoint=products/${e}/variations&_fields=id,attributes,price,regular_price,sale_price,name,menu_order`);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(e){return console.error("Error fetching product variations:",e),{success:!1,error:"Nie udało się pobrać wariant\xf3w produktu"}}}async getProductAttributes(){try{let e=await fetch("/api/woocommerce?endpoint=products/attributes&_fields=id,name,slug,type,order_by,has_archives");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching product attributes:",e),{success:!1,error:"Nie udało się pobrać atrybut\xf3w produktu"}}}}let o=new a}}]);